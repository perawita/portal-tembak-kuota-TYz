<?php

namespace App\Http\Controllers;

use App\Http\Services\xlv2;
use Illuminate\Http\Request;

class DeveloperController extends Controller
{
    public function index(Request $request)
    {
        // Buat instance dari kelas xlv2 dengan nomor telepon
        $service = new xlv2('087738915986');

        // Lakukan autentikasi dan dapatkan callback
        $callbacks = $service->authenticate();

        // Periksa apakah autentikasi berhasil dan callbacks diterima
        if ($callbacks !== null) {
            // Jika berhasil, kirim respon JSON dengan callback
            return response()->json(['success' => true, 'callbacks' => $callbacks]);
        } else {
            // Jika gagal, kirim respon JSON dengan pesan error
            return response()->json(['success' => false, 'message' => 'Authentication failed'], 400);
        }
    }

    public function otp()
    {
        $service = new xlv2('087738915986');
        $service->processValidatiOtp(strtoupper('Z8KVZW'), "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ3aGl0ZWxpc3Qtc3RhdGUiOiIyODhmMGJhNC1hNDgzLTQ5NzgtYmVhMy1jNGY0YTk1ZDdkMzciLCJhdXRoSW5kZXhWYWx1ZSI6Im90cCIsIm90ayI6IjM1MTgwcm9oNWVnbHA0M202ZHBlZ2sxb2MxIiwiYXV0aEluZGV4VHlwZSI6InNlcnZpY2UiLCJyZWFsbSI6Ii94bCIsInNlc3Npb25JZCI6IipBQUpUU1FBQ01ESUFCSFI1Y0dVQUNFcFhWRjlCVlZSSUFBSlRNUUFDTURFLipleUowZVhBaU9pSktWMVFpTENKamRIa2lPaUpLVjFRaUxDSmhiR2NpT2lKSVV6STFOaUo5LlpYbEtNR1ZZUVdsUGFVcExWakZSYVV4RFNteGliVTFwVDJsS1FrMVVTVFJSTUVwRVRGVm9WRTFxVlRKSmFYZHBXVmQ0YmtscWIybGFSMng1U1c0d0xpNU5kR1JVVURoUFJGZzROSEZPVDBOblRYQnVNbXBCTG01clQxUktUMDVxZGkxdlVVOXlUbVpVVEZKT1VEUmpkSEIwWnpKTmFYaHVPRFp0U1hOc09VNUJhbWN6U1VKWVQyZHNTR1V0TFdZeFJFVmtXRVY2TkRkZldHNDRTMnM0T1hKSU9HUlZWVEpmV1UxNFRtWlRiRTFRVTNwTVQyNHlhV3BPVm5OMFJubFpWSGR1UzJWd2MxOXRWR052U1VONlpHaEllWE16Y0U1Q2QzbGxOVkprUTA4MmNteEdTbmRRYzFsV1kwNVlkMWhrWkhGWk9EUklhbTFZWHpoMU0yNVZSbVZrTVRKQllXeFdWRFJCVEV4eWJESTNZVGxQZVhSSU0wWklURmRGTmpkd1JWOXVXaTFqVmxGNE5VRmhabTl3TkU1MWRqSjJSa00yUzAwMGFFbE1VR0oxWkdGRGFGaEhNbXhUWjNWNlNVNDFkVjlpVDA1aU1YUjFSelJxYnpKdFZUZExXa3AxZERGeGQyOXJlR1JmUkZoQlVUQlNTbk5XWVZCV1lXaG5kRkEyZFRkaFQwa3pWM1ZoVVZSS09VMWtkMWswWVZGa2FVdHhaMFl3T0ZSdlFtaDBNM0JyVTBObFRFeERUemR5UlRWTmNVRTBUMkl6UjI1b2MyVmljRFpwUkZSU01HVlhWMUJ4TlhsdGRsTkhlakYwT1RscFZtSlFkM0pxVUhRMlRsaDBRbVU1U1hOeVMxZHJiMlpMV1dGNmJqRkxaVVZhVTFwNVpWRkxkRGRDT1ZwMmVUQmZNQzFTVjAweVdsOWpUak4zZG5rdFpreEVWSEJVZEVwT1RubzFWVzR3TWpkS2MydHRaR2RNUWpSbmIwUlJaM0JZT0hOdGRqbHFOamxsZVZOdU1qZ3plakJETUd4MVVVNVRkREJLWVdoZmJGaHlUVkpDUlVKWFRtdHRjMVZmYjBveVdqTnpWVmxvTW1weU9ERkhSVzF0YWpWU1ozRjJTMHMzYkRadmRXaG9aSFZ1TFVVME1FWlJXRWRQT0d0M1pVOXZkVmhpUjA1RFZTMUhaa3RwV0RscVNURTBhbTQwT0RKUlJuTTBZWGRXWDBvM1lrTmljR3N5YzNoZlQxbFpWMHhSVTNOdU4wTnVNMk5vYkdJM1RWaExhRlJKZFdacE5VZDVhMFk0ZWpoeFIwSjJUM1J1UzJ0SmMzWm9URjlpTkMxbGFHeDJhaTFZV0dWaWJrOW9Oa2RSTlVwT1lsRjRhRzVhV1RSZmFqbGhTM2g2V2tsdFZTMWZTWEZpWTBGdmMzSm9WRmhLUTJaWWEyOHdWbE5hWkRaZlUwaDBYMk0zVEZWYU1HczFSRkJEUmtneVJ6ZDVTelJTZHpaS1ZpMWxkRFEzV25aZmVGSkxWME5ZZW5odVgzazBlbFp5VlZKR1RXYzRNRlUxTWkxblMyOURjM1JTYlVkT2FteHBVVlp1ZFRWVlpsTjVXRFEzTlZBNU5YWXpSRmszVjA1SGJrRnJhMHh4VlMxZlNIbFpjWFpDYzJSdlFXaDFRamw2ZWtjMlVFeFRjbTlaY0hCUlNtNDRiRGx2VUc1R1RYSjZkbXh6TkRnd1NVNHRjbk5rV1c1blNucDRaVGw2UjNOUk5UUkNkbXByWVVONFQzQTRkRmRXYkRWd05VaFlaWGRVUVhsdFRrbElla1k0WDNneGFscHpiMUphUTFZNWFEaFBiWFZ5VFZCVFJ6UkNVMHBZWWpCamF6bHFielk1ZW5sdk5VUjZOMTlhU2xsU1YxUjJOek42VWpNdFNGRlFVbDlTZEdsV1RubFhjVGd6TVhjd1NUaHViRUY0WkRBeVpYUTJjek5WU20xUVNGcHRUVEZTWW5ZNGRGRkdaMjA0VEdaMVluQnVTRU5uUjNGSU9FWjBTM296VVdsWGFEUXlMVlV5ZW01UFRsTkdOR2hvVkVaSFlUSnlUbXA2WlRCdWVXUlRUM1p6WHpBMWNHRkphMHhqV2psVE1XZG5NVTFhYUVORVIyUlRZa1ZDT0ZKZldHNTVabWgzYURsV1kycEZhR1YzWW1SUFIzVjJlRmcwVWw5M1YzRktiRUpPYkVoc2RqQTNTek14V21KTlNqQkhUMmROVlZsSmNURkpOVk5rUldOdllYQkRjR0ZPVUhWeVpsVm1kWFIxVm1ObldsQndRbXRmUTBSSE9FcE1UMFprZVdGQ1RFeFhTSGwwUVV0cE5YWkljRmwxYjFreUxUUTNhR1E0TjNWNlduWktZV2RMYlVzeVJEZFVja3BXZHpKbVVXdFlkQzFrUjJReGIwRlFTRkJwWkhJeGFtVkJVMDR4YjFKcVQzWkNSRFJvUjJsNVRtSnpTeTFqU0ZoUFRHRXpSVTVvWWxKUmFEUlZSakJQWDJvd2NqSlZSakJ1UzE5emRXTTFWVVkzVHpoUldVWkhTbWg1WVdoVlExTTJNa1p3Y0RCRWRsOHliMk5xZVhreE0wRTJlRmxEVWtSUE5uaDBlRTFMZURSTmFtbFhiVVJRTVVGaVYySkNVMjUyWTNOak5rRmFhMXBoWTFSc1EweGtkMnB1Y1RkR01qZGxhVlp2WkVGdFgwWjJTRGxCV2tkUlpqSllUM1pQZEhOTVVXNW1iVGRHZDBVMWFYTjJWVmxSWVZwSFNHeEthSFp5VG5nd0xVVnhXak5WVDFBMVVHVTBWMWQ0Vkc1d05UQmliVE5hY2tFdE5tWjZTRkJoUjFaNVFWWk5kM0JvVGtWcmNtNXFYelpEWW1OalowRnNMVlp3Y213NWFXcGtMVjlZUjFJeFJFeElZaTFLTlVWblRXSktVR1JhZUdwblRVcFRWeTFrWm5KM1RsWXlVVFo1UjFFNWN6VjVjM2d4Y20wdFVXOW1iMGN3ZVVWMVNuQTNVaTFDVlRORk0ycDJlV3hDVDBGc1FVVnVNVnBJV1hSb1JFVnpMa0kyTkdGTVoyNVFRWGxUY1haVFgybExWMUprUVVFLkpNbFJ2Y3FJNHZJaXNNbEZ5a1JtQmlTQnNaYUVpVW5NWU15V0VobkV0N1EiLCJleHAiOjE3MTUwMjI1NjYsImlhdCI6MTcxNTAyMTk2Nn0.JxXYE5ui4g1mDlYkBHxVWKk2vR0RXQfDiH9iAA54LNI");
    }
}
